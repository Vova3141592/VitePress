import{_ as a}from"./chunks/hiddify4.Boj7b-p5.js";import{_ as e,c as o,o as t,a2 as r}from"./chunks/framework.BJ0zSiM-.js";const i="/assets/nekoray.4ZIlGRCs.png",l="/assets/nekoray2.C6_uwKcl.png",s="/assets/nekoray5.CwJacWdp.png",d="/assets/nekoray6.DFkEyCiu.png",p="/assets/nekoray3.DYRQAEPS.png",c="/assets/nekoray4.CioPo_iK.png",n="/assets/nekoray7.BTi1tnwe.png",x=JSON.parse('{"title":"NekoRay","description":"","frontmatter":{},"headers":[],"relativePath":"computer/nekoray.md","filePath":"computer/nekoray.md"}'),h={name:"computer/nekoray.md"},m=r('<h1 id="nekoray" tabindex="-1">NekoRay <a class="header-anchor" href="#nekoray" aria-label="Permalink to &quot;NekoRay&quot;">​</a></h1><h3 id="как-установить" tabindex="-1">Как установить? <a class="header-anchor" href="#как-установить" aria-label="Permalink to &quot;Как установить?&quot;">​</a></h3><ol><li>Скачайте архив с файлами <a href="https://en.nekoray.org/download/" target="_blank" rel="noreferrer">отсюда</a>.</li><li>Достаньте папку из архива. Положите её, например, на рабочий стол.</li><li>Откройте папку, найдите и запустите файл <code>nekoray.exe</code>.</li></ol><div class="tip custom-block"><p class="custom-block-title">Совет</p><p>Для удобства можно положить папку в незаметное место, а на рабочем столе сделать ярлык на файл <code>nekoray.exe</code>.</p><details class="details custom-block"><summary>Как это сделать?</summary><ol><li>Положите папку в любое место, кроме рабочего стола.</li><li>Нажмите правой кнопкой мыши по рабочему столу.</li><li>Выберите «Создать» -&gt; «Ярлык».</li><li>Укажите путь до файла <code>nekoray.exe</code>.</li><li>Введите красивое имя ярлыка, например «NekoRay».</li></ol></details></div><h3 id="как-настроить" tabindex="-1">Как настроить? <a class="header-anchor" href="#как-настроить" aria-label="Permalink to &quot;Как настроить?&quot;">​</a></h3><h4 id="_1-при-первом-запуске-программа-попросит-выбрать-ядро" tabindex="-1">1. При первом запуске программа попросит выбрать ядро: <a class="header-anchor" href="#_1-при-первом-запуске-программа-попросит-выбрать-ядро" aria-label="Permalink to &quot;1. При первом запуске программа попросит выбрать ядро:&quot;">​</a></h4><p><img src="'+i+'" alt="Ядро"></p><p>Выберите «Xray».</p><details class="details custom-block"><summary>Почему?</summary><p>VPN-сервер использует ядро Xray. Желательно, чтобы сервер и программа использовали одно и то же ядро: возможно, так будет стабильнее.</p></details><h4 id="_2-появится-оповещение-межсетевого-экрана-windows" tabindex="-1">2. Появится оповещение межсетевого экрана Windows: <a class="header-anchor" href="#_2-появится-оповещение-межсетевого-экрана-windows" aria-label="Permalink to &quot;2. Появится оповещение межсетевого экрана Windows:&quot;">​</a></h4><p><img src="'+l+'" alt="Уведомление"></p><p>Нажмите «Разрешить доступ».</p><details class="details custom-block"><summary>Зачем?</summary><p>Программа спросила, можно ли открывать любые порты на любых IP-адресах. Разрешите, чтобы она смогла работать.</p><p>Фактически, программа открывает 3 TCP-порта на IP-адресе <code>127.0.0.1</code>: <code>2080</code>, <code>2081</code> и ещё один со случайным номером.</p><p>Через первые два она принимает трафик от других программ и отправляет его на VPN-сервер. Третий нужен для управления ядром Xray.</p><p>Ничего страшного в том, чтобы разрешить доступ, нет: порты «слушают» на IP-адресе loopback-интерфейса, который находится внутри компьютера.</p><p>Даже если программа откроет порт на IP-адресе сетевого адаптера (она этого не делает, но права, которые она запрашивает, позволяют ей это сделать), ничего страшного не случится, ведь роутер по умолчанию отклоняет все входящие подключения из интернета.</p></details><h4 id="_3-настроите-раздельную-маршрутизацию" tabindex="-1">3. Настройте раздельную маршрутизацию <a class="header-anchor" href="#_3-настроите-раздельную-маршрутизацию" aria-label="Permalink to &quot;3. Настройте раздельную маршрутизацию&quot;">​</a></h4><p>Главное преимущество NekoRay перед <a href="/computer/hiddify">Hiddify</a> — возможность подробно настроить маршрутизацию. Давайте это сделаем:</p><ol><li>Нажмите «Настройки».</li><li>Нажмите «Настройки маршрутов».</li></ol><p><img src="'+s+'" alt="Маршрутизация"></p><ol start="3"><li>Нажмите «Базовые маршруты».</li><li>Заполните табличку маршрутов:</li></ol><table tabindex="0"><thead><tr><th></th><th>Напрямую</th><th>Прокси</th><th>Блок</th></tr></thead><tbody><tr><td>IP</td><td>geoip:ru<br>geoip:private</td><td></td><td></td></tr><tr><td>Домен</td><td>ru<br>xn--p1ai<br>su</td><td>habr.com</td><td></td></tr></tbody></table><p><img src="'+d+'" alt="Маршрутизация"></p><details class="details custom-block"><summary>Почему так?</summary><p>В первом столбике мы записали признаки трафика, который пойдёт напрямую:</p><ul><li>IP-адреса назначения: <ul><li><code>geoip:ru</code> — трафик с российским IP-адресом назначения пойдёт напрямую.</li><li><code>geoip:private</code> — трафик с частным IP-адресом назначения пойдёт напрямую. Например, до принтера в вашей локальной сети.</li></ul></li><li>Доменные имена: <ul><li><code>ru</code> — трафик до всех .ru-сайтов пойдёт напрямую. В табличке записывать нужно без точки.</li><li><code>xn--p1ai</code> — это punycode-представление доменного имени <code>рф</code>. Поэтому трафик до всех .рф-сайтов пойдёт напрямую.</li><li><code>su</code> — трафик до всех .su-сайтов пойдёт напрямую. Это доменное имя СССР, которое всё ещё используется некоторыми СНГ-сайтами.</li></ul></li></ul><p>Во втором столбике мы записали признаки трафика, который пойдёт через VPN. На Хабре есть запрещённые статьи, поэтому трафик до него я пустил через VPN. У этого сайта российский IP-адрес, поэтому, согласно первому столбику, он должен идти напрямую. Но если явно указать его доменное имя во втором столбике, трафик пойдёт всё-таки через VPN.</p><p>В последнем столбике находятся сайты, к которым мы не должны подключаться вообще. Можно попробовать туда рекламу засунуть.</p><p>В нижнем правом углу находится правило по умолчанию. Если его не менять, то весь трафик по умолчанию идёт через VPN (proxy).</p></details><h4 id="_4-вставьте-ссылку" tabindex="-1">4. Вставьте ссылку: <a class="header-anchor" href="#_4-вставьте-ссылку" aria-label="Permalink to &quot;4. Вставьте ссылку:&quot;">​</a></h4><ol><li>Скопируйте ссылку полностью с моей <a href="https://vk.com/vova3141592" target="_blank" rel="noreferrer">страницы</a> ВКонтакте.</li><li>Нажмите «Сервер».</li><li>Нажмите «Добавить профиль из буфера обмена».</li></ol><p><img src="'+p+'" alt="Ссылка"></p><h4 id="_5-подключитесь" tabindex="-1">5. Подключитесь: <a class="header-anchor" href="#_5-подключитесь" aria-label="Permalink to &quot;5. Подключитесь:&quot;">​</a></h4><ol><li>Нажмите правой кнопкой мыши по подключению.</li><li>Нажмите «Запустить».</li><li>Нажмите «Режим TUN».</li><li>Разрешите программе работать с правами администратора.</li></ol><p><img src="'+c+'" alt="Подключение"></p><details class="details custom-block"><summary>Почему режим TUN?</summary><p>Режим TUN — это то же самое, что режим «VPN» в Hiddify: весь трафик идёт через Nekoray, а затем NekoRay решает, пустить его напрямую или через VPN.</p><p>В режиме системного прокси NekoRay только «рекомендует» другим программам пускать трафик через себя. Но не все программы умеют работать в таком режиме. Такие программы будут отправлять трафик напрямую, минуя NekoRay. Для них VPN работать не будет.</p></details><h4 id="_6-проверьте-подключение" tabindex="-1">6. Проверьте подключение <a class="header-anchor" href="#_6-проверьте-подключение" aria-label="Permalink to &quot;6. Проверьте подключение&quot;">​</a></h4><p>Зайдите на <a href="https://2ip.io/" target="_blank" rel="noreferrer">2ip.io</a>. Если местоположение определяется как Амстердам, тогда VPN работает!</p><p><img src="'+a+'" alt="2ip.io"></p><p>Провертье правила маршрутизации. Зайдите на <a href="https://2ip.ru/" target="_blank" rel="noreferrer">2ip.ru</a> (доменное имя кончается на <code>.ru</code>). Местоположение должно определиться как Россия. Если так, тогда маршрутизация работает!</p><p><img src="'+n+'" alt="Подключение"></p><h2 id="что-дальше" tabindex="-1">Что дальше? <a class="header-anchor" href="#что-дальше" aria-label="Permalink to &quot;Что дальше?&quot;">​</a></h2><p>Если что-то не работает, смело <a href="https://vk.com/vova3141592" target="_blank" rel="noreferrer">напишите</a> мне. Разберёмся, в чём проблема.</p><p>Ещё настройте смартфон: <a href="/iphone/streisand">IPhone</a>, <a href="/android/hiddify">Android</a>.</p>',36),u=[m];function _(k,y,b,P,f,g){return t(),o("div",null,u)}const I=e(h,[["render",_]]);export{x as __pageData,I as default};
